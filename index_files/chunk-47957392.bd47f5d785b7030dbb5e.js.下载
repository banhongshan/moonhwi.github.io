(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47957392"],{1458:function(e,t,a){"use strict";var s=a("1c8b"),i=a("aa6b").f,n=a("d88d"),r=a("07a2"),l=a("2732"),o=a("783d"),c=a("9b9d"),u="".endsWith,d=Math.min,p=o("endsWith"),h=!c&&!p&&!!function(){var e=i(String.prototype,"endsWith");return e&&!e.writable}();s({target:"String",proto:!0,forced:!h&&!p},{endsWith:function(e){var t=String(l(this));r(e);var a=arguments.length>1?arguments[1]:void 0,s=n(t.length),i=void 0===a?s:d(n(a),s),o=String(e);return u?u.call(t,o,i):t.slice(i-o.length,i)===o}})},"38c2":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAKCAYAAACJxx+AAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjdDNzY2RkIxMEI3MTFFOEFGMDNFRkUwMUQ4MzY4NjUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjdDNzY2RkMxMEI3MTFFOEFGMDNFRkUwMUQ4MzY4NjUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDNEEwQUIxMDEwQjcxMUU4QUYwM0VGRTAxRDgzNjg2NSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGN0M3NjZGQTEwQjcxMUU4QUYwM0VGRTAxRDgzNjg2NSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pj2CP7AAAACxSURBVHjaXI8xCsJAEEV3TQS1N52NWItlDiM2EcFCsVc7vUBS2MVbeAhtApZBGzvBMghBsr4Nuxoy8Pgzs5/5rFRKCVveUkRI5xmKwO5kzZAjTQzS7lyWFzRmeUBPkBvzChnL7kKlNAPYwBUK8GEN9zICd49hBiNoQQIhVx8N8S8X2vCGD5RvOuKG9mEHZ2MemjnVrhfMObdFJxDQ79EpZPVv6qHA4FRzq3U0+b/6CjAAsCc4xyntiPUAAAAASUVORK5CYII="},"6ae3":function(e,t,a){var s=a("1c8b"),i=a("8d7b");s({target:"Array",proto:!0,forced:i!==[].lastIndexOf},{lastIndexOf:i})},7754:function(e,t,a){e.exports=a.p+"static/img/renbg.cd900711.png"},"8d7b":function(e,t,a){"use strict";var s=a("da10"),i=a("3da3"),n=a("d88d"),r=a("d7e1"),l=a("ff9c"),o=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,d=r("lastIndexOf"),p=l("indexOf",{ACCESSORS:!0,1:0}),h=u||!d||!p;e.exports=h?function(e){if(u)return c.apply(this,arguments)||0;var t=s(this),a=n(t.length),r=a-1;for(arguments.length>1&&(r=o(r,i(arguments[1]))),r<0&&(r=a+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}:c},a499:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABIUlEQVQ4T6XTPyuHURjG8Q+DhJIsvAjJZCBFJLF4A1L+LZiY2VnEIonsJoOBDP4MJl6FmZJkoVvn6PH04FfO9pz7ub7nvq/rnDr/XHVoxz3WsV8jbxZr6A5APU4whgXs/QGZwy5OMRGAWA1pYwjzv0AWsY2LdOBbBgSkEWfoxxJ2Sp0UxeN4jXoREN9Nid6LVWwmyAo2cI2RLK4CxF4LzpEhzcngW8SIL8XOyh3kWkAu0ZM2QjyM57LBPwHiv2VsJUGVJ5+lnwBTOEyjvKe5p3FUSwc555skDE2k01d1T8od5KjC7dGCYcV0vt2TIiCLK90upfPlSQbknO8wUOV2mr2YzickAJ14QIgH8fTHW2jFFbrQkTuYwTEea3yNbZjEwQetRD08/mAx7wAAAABJRU5ErkJggg=="},abfe:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABf0lEQVQ4T53TMUhXURQG8J85WNGs2J9Ga2jQiGixpZYSKjMEWwKhCNpCiECKipaICGo0kFAIjIYyQYK0oSGSokVQ9yIEERwLKk6cF9dXf4guPC73vvN95zvfPafF5rUFwziCvejCChbxEhP4XkJaisNOvMB23McCPiZgABexAyfxucJVBO34gMcYxdeasup4HtfQg7W4rAjm8Qq3mgDL6+s4lGX+IjiBqziQUVN4hJkCdRxnMZhJlzASJQdB1B2AJwnoxTROYw5Hs7QgeZMxF9AXfgTBF+zHpyJjkDzDvcxUgiNsF96iEQTf0vnYy3UZt3El9/LfNqxjaxCsYt9fFEQZd3Epn66SXyl4h84giMCQ+7DmwRnM4jCeoixjCPH1B0E0xh3swQ/EK0zieaH5GM6lsYGJJrsRyas+CLdf4+b/9EFgOvA+WceakLSlmfG8f3RiYBopewMP0pdWdONgmhnte6o0vBymIKlP424s5zRGq4+nT79F1gn+wYLNIT8BVy1REcXu7l8AAAAASUVORK5CYII="},c40f:function(e,t,a){e.exports=a.p+"static/img/nodata.02f36b6f.png"},e76e:function(e,t,a){},f625:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAABFCAYAAAGH9uvFAAAABGdBTUEAALGPC/xhBQAAB/xJREFUeAHtnQtv0zwUhr0rbGwM2AUYaGhiEvD/fwwCgdiN22AwdmOMMb7vNUqbpM6aNJnr1I+lto7j2MePT0/sxJexT58+/TUBuvEAZbIijbZgBwcHjYNvjNj5+XmjwjUi2NjYmJmenjYXFxeNCTfZREpnZ2fm9PS0k9TDhw87/kE9jQh2//79QfMvvK6RqixMvcaJsRANbJC04hCqCQPbCKmTkxPz+/fvGqqdvbQRoW7dumWmpqZsysfHx9kcBjhqxF59/Pixk3UiXCdgAA8moSy0IEmVFd53vEb+gL6FHlZ+jRiGJoT/v3lg/v51d8HGx8fNdTSWqsodDKybN2+aO3fuZOTf3t42a2trpokbaybhAQ+C+RseHR11NOvPnz8m6T2FAkp8g9Gs+fl5o56c3MTEhP1Iq+SaaIjYhGp+cTesADCYv2EFmYcWFVgV0PM3rAALzQJWBQIVoqJZwKpAoELUYBql6QdPefmbeJqfT3OQ4yBgvXz50rx48aJQ/n7nCy9s+ETQNksd6ZBcULB2d3fNhw8fOnySvmEnYMieYGBJix4/fmxWV1ctMD15ePXq1ZDxZLMPBlZaiwTs8vLSPHv2zLx79y4r8RCPgoGVZ5C8illfX8+fGtpxMH3DNjQdgoE1NHWpkHGwf8MKZfAWFVgVUAMLWBUIVIiKga8Ai6jlCWCyyrMiZgUCKFYFWEQtTwDFKs+KmBUIoFgVYBG1PIEgXuyUF/d6Y+oF0sLCgpmZmamc0c+fP83h4aF5/vx55WtH8QIUK1ers7OzPaNac1HsoWZs6A2BxirKabzijx8/rJ8vY7gVXqEFmgmoF5iuKT8a8Kqx5jg3Acg4uGhU9M7OjpH10rtLWaO8gmm8viwWzk2AW2GOy9evX83GxoaZm5vrnJmcnLQKppEEGl2g2TLLy8v2Nvj27Vvr70TGYwmgWDlFWFpayoV0D3X7S4/E0JmnT5/aCFIwXJcAitVlYW95alcVzd9LRe3xaqazqy3WEzGSAN4VRlLRvotJ49038UjyQ7EiqWjfxUSxfBOPJD8UK5KK9l1MGu++iUeSHxYrkor2XUwUyzfxSPJDsSKpaN/FRLF8E48kPxQrkor2XUwUyzfxSPJDsSKpaN/FRLF8E48kPxQrkor2XUzGY6WIazKEZttUHY+locuupcVTSUfnRbFSVa5hyffu3UuFlPfu7++Xmt1TPsV2x0SxUvWnWTd3795NhZT3hrSOf3mpry8mbawB2cpC4YoJoFjFbArPfPv2zezt7Rntb4NzE+BW6OZiQzXzRlO/njx5komldphum/l9gDKRIj/AYhUowJs3b8yNGzfs2c3NzZ5YKFUPkkwAipXB8e9AlkrTubTstayVHidsbW1lYrJOQwZHzwGKlUKieYGvX7+2SpXe5yG5FSaW6/3790YLPTNJNQUv50WxUkA0hV7LGD148CAV+s+bWC4tdaStw7VckW6HumXiegnQeE8x0dPzq3YqlXLpFijlk1tcXLQLg8jK4bIEsFhZHn2PEqVKImpxEIXJ2uG6BFCsLouBfbJyeiyB6xKARpeFtTrfv39PheAdlACKlSKnJYzUMB9kdMPKykoqJbwoVkoHeOiZglHTSxurJkAudxNAsdxcCK1JAMWqCZDL3QRQLDcXQmsSQLFqAuRyNwEUy82F0JoEUKyaALncTQDFcnMhtCYBFKsmQC53E2CpSDcXQiEAgQAJcCcMsFIQCQIQcBPAYLm5EAoBCARIAIMVYKUgEgQg4CaAwXJzIRQCEAiQAAYrwEpBJAhAwE0Ag+XmQigEIBAgAQxWgJWCSBCAgJsABsvNhVAIQCBAAhisACsFkSAAATcB1phxc4k+VLsJHR4emunpaTMxMeGNx+XlpV1AShvODLqbkTdhycg7AQyWd+TtyFAGS7smzM/Pd1bw9SG5Vgw+Pz83nz9/xmD5AN6yPOgStqzCfImbLJGZ/PrO11d+5NMuArSw2lVfrZb29PTUaIcYtdx+/fplN/1QCw4HgbIEaGGVJUW8HgLail1dx4uLi55zrgDt6qi90xKnYxwEqhCghVWFFnEtAbWUkn2KtfeejvWw/NGjR2ZqaqqQkna92tjYKDzPCQj0I4DB6keI8x0Cx8fH1lCpSyfjo81B1WLSTmfq6n358sU+MNdOtGxS1cGGp0ECGKwGYY5iUjJIMlR6a6fWk7bG1oaz6a6dhj2sra3ZrqEM197enjVcq6urdlhEwkUP8GXUTk5ObFztY5Xf7jGJyy8EXAQwWC4qhFkC2lBPxicxVNreM22o8pjUqtJmxmpx7e7uWuOkh+u6Ts+6ZNiUpgyeupIKU/o6f/v27XxyHEOghwAGqwcJAQkBDRqdnZ21Xb8krMyvDFPacB0cHNjL1KJSmonT4ND9/X37Ucurn0FMruM3XgIYrHjrvm/J9RZvZmamb7yiCInhKjqv8MXFRfuRwdJHbxzLvnW8Kl3OjSYB3iuPZr22rlTLy8tmfX3ddg2vetPYuoIhcKMEMFiN4hydxJJnVcmvr5LNzc0ZPZz3na+v8pFPPQJ0CevxG9mrl5aW7OTno6MjO87KV0E1nktdSSY++yLernzYl7Bd9YW0EIiaAF3CqKufwkOgXQQwWO2qL6SFQNQEMFhRVz+Fh0C7CGCw2lVfSAuBqAlgsKKufgoPgXYRwGC1q76QFgJRE8BgRV39FB4C7SKAwWpXfSEtBKImgMGKuvopPATaReA/BjIBJwF81O4AAAAASUVORK5CYII="},fca8:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"front"}},[s("frontHeader"),e._v(" "),e.simpleinfo?s("div",{staticClass:"mw infoCenter-main"},[s("div",{staticClass:"main-top"},[s("div",{staticClass:"main-top-stuinfo"},[s("img",{staticClass:"main-img",attrs:{src:a("7754"),alt:""}}),e._v(" "),s("div",{staticClass:"main-conter"},[s("div",{staticClass:"W_img"},[s("img",{attrs:{src:e.simpleinfo.avatar,alt:""}})]),e._v(" "),s("div",{staticClass:"W_test"},[s("p",[e._v(e._s(e.simpleinfo.name))]),e._v(" "),s("div",[s("span",[e._v("学工号: "+e._s(e.simpleinfo.number))]),e._v(" "),e.simpleinfo.college?s("span",[e._v("部门: "+e._s(e.simpleinfo.college))]):e._e()])]),e._v(" "),e.customHelper.getConfig("isToInfoCenter")?s("a",{staticClass:"W_personal",attrs:{href:"javascript:;"},on:{click:e.appCommonH.toInfoCenter}},[e._v("\n            个人信息  >\n          ")]):e._e()])])]),e._v(" "),s("div",{staticClass:"main-bottom"},[s("ul",{staticClass:"main-bottom-left"},[s("li",[s("a",{class:{active:"infoCenter"==e.showroute},attrs:{href:"javascript:;"},on:{click:function(t){return e.changeroute("infoCenter")}}},[e._v("\n            通知消息\n          ")])]),e._v(" "),"校外用户"!=e.simpleinfo.identity_id?[e.mixShouSignature?s("li",[s("a",{class:{active:"sealInfo"==e.showroute},attrs:{href:"javascript:;"},on:{click:function(t){return e.changeroute("sealInfo")}}},[e._v("\n              电子签章\n            ")])]):e._e(),e._v(" "),s("li",[s("a",{class:{active:"autograph"==e.showroute},attrs:{href:"javascript:;"},on:{click:function(t){return e.changeroute("autograph")}}},[e._v("\n              登录授权\n            ")])]),e._v(" "),s("li",[s("a",{class:{active:"committalCharge"==e.showroute},attrs:{href:"javascript:;"},on:{click:function(t){return e.changeroute("committalCharge")}}},[e._v("\n              委托审批\n            ")])])]:e._e(),e._v(" "),e.mixShowScientific?s("li",[s("a",{class:{active:"scientificUser"==e.showroute},attrs:{href:"javascript:;"},on:{click:function(t){return e.changeroute("scientificUser")}}},[e._v("\n            科研项目授权\n          ")])]):e._e(),e._v(" "),s("li",[s("a",{class:{active:"weituoshenqing"==e.showroute},attrs:{href:"javascript:;"},on:{click:function(t){return e.changeroute("weituoshenqing")}}},[e._v("\n            委托申请\n          ")])]),e._v(" "),e.hasAgent?s("li",[s("a",{class:{active:"dailiweituo"==e.showroute},attrs:{href:"javascript:;"},on:{click:function(t){return e.changeroute("dailiweituo")}}},[e._v("\n            代理委托\n          ")])]):e._e(),e._v(" "),s("li",[s("a",{class:{active:"downloadCenter"==e.showroute},attrs:{href:"javascript:;"},on:{click:function(t){return e.changeroute("downloadCenter")}}},[e._v("\n            下载中心\n          ")])])],2),e._v(" "),e.arr.includes("infoCenter")?s("infoCenter",{directives:[{name:"show",rawName:"v-show",value:"infoCenter"==e.showroute,expression:"showroute == 'infoCenter'"}]}):e._e(),e._v(" "),e.arr.includes("sealInfo")?s("sealInfo",{directives:[{name:"show",rawName:"v-show",value:"sealInfo"==e.showroute,expression:"showroute == 'sealInfo'"}]}):e._e(),e._v(" "),e.arr.includes("autograph")?s("autograph",{directives:[{name:"show",rawName:"v-show",value:"autograph"==e.showroute,expression:"showroute == 'autograph'"}]}):e._e(),e._v(" "),e.arr.includes("committalCharge")?s("committalCharge",{directives:[{name:"show",rawName:"v-show",value:"committalCharge"==e.showroute,expression:"showroute == 'committalCharge'"}]}):e._e(),e._v(" "),e.arr.includes("scientificUser")?s("scientificUser",{directives:[{name:"show",rawName:"v-show",value:"scientificUser"==e.showroute,expression:"showroute == 'scientificUser'"}]}):e._e(),e._v(" "),e.arr.includes("weituoshenqing")?s("weituoshenqing",{directives:[{name:"show",rawName:"v-show",value:"weituoshenqing"==e.showroute,expression:"showroute == 'weituoshenqing'"}]}):e._e(),e._v(" "),e.arr.includes("dailiweituo")?s("dailiweituo",{directives:[{name:"show",rawName:"v-show",value:"dailiweituo"==e.showroute,expression:"showroute == 'dailiweituo'"}]}):e._e(),e._v(" "),e.arr.includes("downloadCenter")?s("downloadCenter",{directives:[{name:"show",rawName:"v-show",value:"downloadCenter"==e.showroute,expression:"showroute == 'downloadCenter'"}]}):e._e()],1)]):e._e(),e._v(" "),e.simpleinfo?e._e():s("div",{directives:[{name:"loading",rawName:"v-loading",value:!0,expression:"true"}],attrs:{id:"infoCenterLoading"}}),e._v(" "),s("toTop"),e._v(" "),s("frontFooter")],1)},i=[],n=a("e793"),r=a("97d6"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-bottom-right"},[a("div",{staticClass:"main-bottom-right-info"},[a("div",{staticClass:"info-tit"},[a("div",[a("a",{class:{active:"allnews"==e.showpage},attrs:{href:"javascript:;"},on:{click:function(t){return e.setroute("allnews")}}},[e._v("\n          全部消息\n        ")]),e._v(" "),a("a",{class:{active:"unreadnews"==e.showpage},attrs:{href:"javascript:;"},on:{click:function(t){return e.setroute("unreadnews")}}},[e._v("\n          未读消息\n          "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.unreadnum>0,expression:"unreadnum > 0"}]},[e._v("("+e._s(e.unreadnum.length>2?"...":e.unreadnum)+")")])]),e._v(" "),a("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.messageShow=!0}}},[e._v("消息设置")])])]),e._v(" "),a("div",{staticClass:"W_cont"},[a("allnews",{directives:[{name:"show",rawName:"v-show",value:"allnews"==e.showpage,expression:"showpage == 'allnews'"}],on:{getnum:e.getnum}}),e._v(" "),a("unreadnews",{directives:[{name:"show",rawName:"v-show",value:"unreadnews"==e.showpage,expression:"showpage == 'unreadnews'"}],on:{getnum:e.getnum}})],1)]),e._v(" "),e.messageShow?a("messageAlert",{on:{hideMessage:e.hideMessage}}):e._e()],1)},o=[],c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"info-filuer"},[s("el-select",{attrs:{size:"mini",placeholder:"请选择分类"},model:{value:e.newsclass,callback:function(t){e.newsclass=t},expression:"newsclass"}},e._l(e.allclass,(function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})})),1),e._v(" "),s("div",{staticStyle:{"line-height":"53px"}},[s("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.sitmessageread(0)}}},[e._v("全部标记为已读")]),e._v(" "),s("a",{attrs:{href:"javascript:;"},on:{click:e.delall}},[e._v("全部删除")])])],1),e._v(" "),s("ul",{staticClass:"info-lists"},[e._l(e.allList,(function(t,a){return s("li",[s("div",{staticClass:"info-list-left"},[s("div",{on:{click:function(a){return e.tourl(t.content.args.addr,a)}}},["yes"==t.content.args.urgent?s("a",{class:"no"==t.isread?"jinji":"jrayjinji",attrs:{href:"javascript:;"}},[e._v("紧急")]):e._e(),e._v(" "),t.content.args.mandate&&""!=t.content.args.mandate?s("a",{staticClass:"daiban",attrs:{href:"javascript:;"}},[e._v("代办自"+e._s(t.content.args.mandate))]):e._e(),e._v(" "),s("span",{domProps:{innerHTML:e._s(e.splice(t.content.content))},on:{click:e.addUnderline}})]),e._v(" "),s("div",[s("span",[e._v(e._s(e.cufe?t.created.slice(0,16):t.created))]),e._v(" "),s("span",[e._v("来源: "+e._s(t.sender))])])]),e._v(" "),s("div",{staticClass:"info-list-right"},["no"==t.isread?s("a",{attrs:{href:"javascript:;"},on:{click:function(s){return e.sitmessageread(t.id,a)}}},[e._v("标记为已读")]):s("a",{staticStyle:{color:"#878787",cursor:"not-allowed"},attrs:{href:"javascript:;"}},[e._v("已读")]),e._v(" "),s("a",{attrs:{href:"javascript:;"},on:{click:function(a){return e.sitmessagedel(t.id)}}},[e._v("删除")])])])})),e._v(" "),0==e.allList.length?s("li",{staticClass:"nodatali"},[s("img",{attrs:{src:a("c40f"),alt:""}}),e._v(" "),s("p",[e._v("暂无数据")])]):e._e()],2),e._v(" "),e.allList.length>0?s("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.totalPage,"page-size":20,"current-page":e.currentPage},on:{"current-change":e.getHistory}}):e._e()],1)},u=[],d=(a("ecb4"),a("6ae3"),a("77ad"),a("ea69"),a("513c"),{data:function(){return{cufe:window.location.hostname.indexOf("cufe")>-1,newsclass:"全部类型",allclass:{},currentPage:1,allList:[],totalPage:0}},created:function(){this.newsclass=this.$route.query.type?this.$route.query.type:"全部类型",this.getHistory(1)},watch:{newsclass:function(e){this.getHistory(1)},$route:function(e,t){this.newsclass=this.$route.query.type?this.$route.query.type:"全部类型"}},methods:{getHistory:function(e){var t=this,a=this,s="";"全部类型"==a.newsclass?s=void 0:"申请"==a.newsclass?s=1:"审批"==a.newsclass?s=2:"知会"==a.newsclass?s=3:"催办"==a.newsclass&&(s=4),a.appFetch({method:"get",url:"sitmessagelist",data:{p:e,pagesize:20,type:s}},(function(e){0==e.e?(a.allList=e.d.data,a.allclass=e.d.types,a.allclass[0]="全部类型",a.currentPage=Number(e.d.page),a.totalPage=Number(e.d.count)):a.$message.error({message:e.m})}),(function(e){t.$message.error("系统错误")}))},sitmessageread:function(e,t){if(0!=this.allList.length){var a=this;this.appFetch({method:"post",url:"sitmessageread",data:{id:e}},(function(s){if(0==s.e)if(0==e){for(var i in a.allList)a.allList[i].isread="yes";a.$emit("getnum","delall")}else a.allList[t].isread="yes",a.$emit("getnum","delone");else a.$message.error({message:s.m})}))}else this.$message.success({message:"暂无消息！"})},sitmessagedel:function(e){var t=this;this.$MessageBox.confirm("是否确定删除此消息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",lockScroll:!1,type:"warning"}).then((function(){var a=t,s=[];1!=Array.isArray(e)?s.push(e):s=e,t.appFetch({method:"post",url:"sitmessagedel",data:{ids:s}},(function(e){if(0==e.e)for(var t in a.allList)for(var i in s)a.allList[t].id==s[i]&&("no"==a.allList[t].isread&&a.$emit("getnum","delone"),a.allList.splice(t,1));else a.$message.error({message:e.m})}))}))},delall:function(){if(0!=this.allList.length){var e=[];for(var t in this.allList)e.push(this.allList[t].id);this.sitmessagedel(e)}else this.$message.success({message:"暂无消息！"})},tourl:function(e,t){$(t.target).children("span").css({textDecoration:"underline",color:"#4285f4"}),window.open(e)},addUnderline:function(e){$(e.target).css({textDecoration:"underline",color:"#4285f4"})},splice:function(e){if(-1!=e.lastIndexOf(")")){var t=e.lastIndexOf(")");return e.slice(0,t)}return e}}}),p=Object(n["a"])({name:"allnews"},d),h=p,m=a("9ca4"),g=Object(m["a"])(h,c,u,!1,null,null,null),f=g.exports,v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"info-filuer"},[s("el-select",{attrs:{size:"mini",placeholder:"请选择分类"},model:{value:e.newsclass,callback:function(t){e.newsclass=t},expression:"newsclass"}},e._l(e.allclass,(function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})})),1),e._v(" "),s("div",{staticStyle:{"line-height":"53px"}},[s("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.sitmessageread(0)}}},[e._v("全部标记为已读")]),e._v(" "),s("a",{attrs:{href:"javascript:;"},on:{click:e.delall}},[e._v("全部删除")])])],1),e._v(" "),s("ul",{staticClass:"info-lists"},[e._l(e.allList,(function(t,a){return s("li",[s("div",{staticClass:"info-list-left"},[s("div",{on:{click:function(a){return e.tourl(t.content.args.addr,a)}}},["yes"==t.content.args.urgent?s("a",{staticClass:"jinji",attrs:{href:"javascript:;"}},[e._v("紧急")]):e._e(),e._v(" "),t.content.args.mandate&&""!=t.content.args.mandate?s("a",{staticClass:"daiban",attrs:{href:"javascript:;"}},[e._v("代办自"+e._s(t.content.args.mandate))]):e._e(),e._v(" "),s("span",{domProps:{innerHTML:e._s(e.splice(t.content.content))},on:{click:e.addUnderline}})]),e._v(" "),s("div",[s("span",[e._v(e._s(e.cufe?t.created.slice(0,16):t.created))]),e._v(" "),s("span",[e._v("来源: "+e._s(t.sender))])])]),e._v(" "),s("div",{staticClass:"info-list-right"},[s("a",{attrs:{href:"javascript:;"},on:{click:function(s){return e.sitmessageread(t.id,a)}}},[e._v("标记为已读")]),e._v(" "),s("a",{attrs:{href:"javascript:;"},on:{click:function(a){return e.sitmessagedel(t.id)}}},[e._v("删除")])])])})),e._v(" "),0==e.allList.length?s("li",{staticClass:"nodatali"},[s("img",{attrs:{src:a("c40f"),alt:""}}),e._v(" "),s("p",[e._v("暂无数据")])]):e._e()],2),e._v(" "),e.allList.length>0?s("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.totalPage,"page-size":20,"current-page":e.currentPage},on:{"current-change":e.getHistory}}):e._e()],1)},w=[],_={data:function(){return{cufe:window.location.hostname.indexOf("cufe")>-1,newsclass:"全部类型",allclass:[],currentPage:1,allList:[],totalPage:0}},created:function(){this.newsclass=this.$route.query.type?this.$route.query.type:"全部类型",this.getHistory(1)},watch:{newsclass:function(e){this.getHistory(1)},$route:function(e,t){this.newsclass=this.$route.query.type?this.$route.query.type:"全部类型"}},methods:{getHistory:function(e){var t=this,a="";"全部类型"==t.newsclass?a=void 0:"申请"==t.newsclass?a=1:"审批"==t.newsclass?a=2:"知会"==t.newsclass?a=3:"催办"==t.newsclass&&(a=4),t.appFetch({method:"get",url:"sitmessagelist",data:{isread:"no",p:e,pagesize:20,type:a}},(function(e){0==e.e?(t.allList=e.d.data,t.allclass=e.d.types,t.allclass[0]="全部类型",t.currentPage=Number(e.d.page),t.totalPage=Number(e.d.count),"全部类型"==t.newsclass&&t.$emit("getnum",t.totalPage)):t.$message.error({message:e.m})}))},sitmessageread:function(e,t){if(0!=this.allList.length){var a=this;this.appFetch({method:"post",url:"sitmessageread",data:{id:e}},(function(s){if(0==s.e)if(0==e)a.allList=[],a.$emit("getnum","delall");else{for(var i in a.allList.splice(t,1),a.allList)e==a.allList[i].id&&a.allList.splice(i,1);a.$emit("getnum","delone")}else a.$message.error({message:s.m})}))}else this.$message.success({message:"暂无消息！"})},sitmessagedel:function(e){var t=this;this.$MessageBox.confirm("是否确定删除此消息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",lockScroll:!1,type:"warning"}).then((function(){var a=t,s=[];1!=Array.isArray(e)?s.push(e):s=e,t.appFetch({method:"post",url:"sitmessagedel",data:{ids:s}},(function(e){if(0==e.e){for(var t in a.allList)for(var i in s)a.allList[t].id==s[i]&&a.allList.splice(t,1);a.$emit("getnum","delone")}else a.$message.error({message:e.m})}))}))},delall:function(){if(0!=this.allList.length){var e=[];for(var t in this.allList)e.push(this.allList[t].id);this.sitmessagedel(e)}else this.$message.success({message:"暂无消息！"})},tourl:function(e,t){$(t.target).children("span").css({textDecoration:"underline",color:"#4285f4"}),window.open(e)},addUnderline:function(e){$(e.target).css({textDecoration:"underline",color:"#4285f4"})},splice:function(e){if(-1!=e.lastIndexOf(")")){var t=e.lastIndexOf(")");return e.slice(0,t)}return e}}},b=Object(n["a"])({name:"unreadnews"},_),y=b,x=Object(m["a"])(y,v,w,!1,null,null,null),C=x.exports,k={data:function(){return{showpage:"allnews",unreadnum:0,messageShow:!1}},methods:{getnum:function(e){this.unreadnum="delone"==e?String(this.unreadnum-1):"delall"==e?"0":String(e)},setroute:function(e){this.showpage=e},hideMessage:function(e){this.messageShow=e},splice:function(e){if(-1!=e.lastIndexOf(")")){var t=e.lastIndexOf(")");return e.slice(0,t)}return e}},created:function(){var e=this;this.appFetch({method:"get",url:"sitmessagelist",data:{isread:"no",p:1,pagesize:1}},(function(t){0==t.e?e.unreadnum=String(t.d.count):e.$message.error({message:t.m})}))}},S=Object(n["a"])({name:"infoCenter",components:{allnews:f,unreadnews:C,messageAlert:r["x"]}},k),D=S,T=Object(m["a"])(D,l,o,!1,null,null,null),A=T.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-bottom-right"},[a("div",{staticClass:"main-bottom-right-handle"},[a("div",{staticClass:"handle-nav"},[a("a",{class:{active:"signature"==e.cancelpages},attrs:{href:"javascript:;"},on:{click:function(t){return e.setroute("signature")}}},[e._v("\n        签名\n      ")]),e._v(" "),a("a",{class:{active:"personSeal"==e.cancelpages},attrs:{href:"javascript:;"},on:{click:function(t){return e.setroute("personSeal")}}},[e._v("\n        签章\n      ")]),e._v(" "),a("a",{class:{active:"officeSeal"==e.cancelpages},attrs:{href:"javascript:;"},on:{click:function(t){return e.setroute("officeSeal")}}},[e._v("\n        公章\n      ")]),e._v(" "),a("div",[a("p",{on:{click:function(t){e.pwdDialog=!0}}},[e._v("设置密码")]),e._v(" "),a("el-checkbox",{staticStyle:{"font-size":"12px !important",color:"rgba(135,135,135,1)"},on:{change:e.notValidateF},model:{value:e.notValidate,callback:function(t){e.notValidate=t},expression:"notValidate"}},[e._v("每次盖章不需要验证")])],1)]),e._v(" "),a("div",{staticClass:"W_cont"},[e.arr.includes("signature")?a("signature",{directives:[{name:"show",rawName:"v-show",value:"signature"==e.cancelpages,expression:"cancelpages == 'signature'"}]}):e._e(),e._v(" "),e.arr.includes("personSeal")?a("personSeal",{directives:[{name:"show",rawName:"v-show",value:"personSeal"==e.cancelpages,expression:"cancelpages == 'personSeal'"}]}):e._e(),e._v(" "),e.arr.includes("officeSeal")?a("officeSeal",{directives:[{name:"show",rawName:"v-show",value:"officeSeal"==e.cancelpages,expression:"cancelpages == 'officeSeal'"}]}):e._e()],1),e._v(" "),a("el-dialog",{staticClass:"seal_set_pwd",attrs:{title:"设置密码",visible:e.pwdDialog,"lock-scroll":!1,width:"400px",center:""},on:{"update:visible":function(t){e.pwdDialog=t}}},[a("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm2,"status-icon":"",rules:e.rules2,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"密码",prop:"pass"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.ruleForm2.pass,callback:function(t){e.$set(e.ruleForm2,"pass",t)},expression:"ruleForm2.pass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.ruleForm2.checkPass,callback:function(t){e.$set(e.ruleForm2,"checkPass",t)},expression:"ruleForm2.checkPass"}})],1)],1),e._v(" "),a("div",{staticClass:"btn"},[a("button",{on:{click:function(t){e.$refs.ruleForm2.resetFields(),e.pwdDialog=!1}}},[e._v("取消")]),e._v(" "),a("button",{on:{click:e.submitForm}},[e._v("确定")])])],1)],1)])},F=[],j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return""==e.signInfo?a("div",[a("ul",{staticClass:"handle-main"},[a("li",{staticClass:"handle-main-autograph"},[e._m(0),e._v(" "),a("p",[e._v("（建议尺寸：300*70px）")]),e._v(" "),a("div",{staticClass:"autograph-right"},[a("label",{attrs:{for:"upload1"}},[a("input",{staticClass:"fileinput",attrs:{type:"file",id:"upload1"},on:{change:e.upload1}}),e._v("\n          添加签名\n        ")])])])])]):a("div",[a("ul",{staticClass:"handle-main"},[a("li",{staticClass:"handle-main-autograph"},[a("div",{staticClass:"autograph-left"},[a("img",{attrs:{src:""==e.signInfo.image?e.appConfig.staticUrl+"/images/sign.png":e.signInfo.image,alt:""}})]),e._v(" "),a("p",[e._v("（建议尺寸：300*70px）")]),e._v(" "),a("div",{staticClass:"autograph-right"},[a("label",{attrs:{for:"upload2"}},[a("input",{staticClass:"fileinput",attrs:{type:"file",id:"upload2"},on:{change:e.upload2}}),e._v("\n          变更签名\n        ")])])])]),e._v(" "),e.specialShow?e._e():a("div",{staticClass:"handle-lists"},[a("div",{staticClass:"handle-lists-tit"},[a("div",{staticClass:"dian"}),e._v(" "),a("a",{staticClass:"first_a",attrs:{href:"javascript:;"}},[e._v("使用记录")]),e._v(" "),a("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("全部导出")])]),e._v(" "),a("ul",{staticClass:"handle-lists-data"},e._l(e.signHistory,(function(t){return a("li",[a("a",{attrs:{href:"javascript:;"}},[a("p",[e._v(e._s(t.app_name))]),e._v(" "),a("span",[e._v(e._s(t.created))])])])})),0),e._v(" "),e.signtotal.length>0?a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.totalPage,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.getHistory}}):e._e()],1),e._v(" "),a("el-dialog",{attrs:{title:"导出",visible:e.dialogVisible,width:"400px","lock-scroll":!1,center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-date-picker",{attrs:{type:"daterange","unlink-panels":"","value-format":"yyyy-MM-dd"},model:{value:e.daochutime,callback:function(t){e.daochutime=t},expression:"daochutime"}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",width:"70%"},on:{click:e.daochu}},[e._v("确 定")])],1)],1)],1)},E=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"autograph-left"},[s("img",{attrs:{src:a("f625"),alt:""}})])}],U=(a("053b"),a("1458"),a("1d8b")),P={data:function(){return{signInfo:"",signHistory:[],signtotal:0,pageSize:20,currentPage:1,dialogVisible:!1,daochutime:[],totalPage:0,specialShow:"/v2/ucenter/seal"==window.location.pathname,uploadUrl:U["a"].getApi("uploadindex")}},created:function(){var e=this;this.appFetch({method:"get",url:"signInfo"},(function(t){0==t.e?(e.signInfo=t.d,e.getHistory(1)):e.$message.error({message:"获取签名信息失败！"})}))},methods:{getHistory:function(e){var t=this;t.appFetch({method:"get",url:"sealHistory",data:{seal_id:t.signInfo.id,p:Number(e)}},(function(e){0==e.e?(t.signHistory=e.d.data,t.signtotal=e.d.total,t.pageSize=e.d.perpage,t.currentPage=e.d.page,t.totalPage=e.d.total):t.$message.error({message:"获取使用记录失败！"})}))},daochu:function(){if(null!=this.daochutime&&0!=this.daochutime.length)if(this.dialogVisible=!1,0!=this.signHistory.length){var e={s:this.signInfo.depart_id,u:this.signInfo.id,t:this.daochutime[0],e:this.daochutime[1]};window.open(this.appConfig.apiBaseUrl+"/site/seal/export-seal-history?seal_id="+e.u+"&start_time="+e.t+"&end_time="+e.e,"_blank")}else this.$message.warning({message:"暂无可导出数据！"});else this.$message.warning({message:"请选择时间区间！"})},upload1:function(){var e=this,t=document.querySelector("#upload1").files[0];if(!t.name.endsWith(".png"))return this.$message.warning("只可上传png格式"),void $("#upload1").val("");function a(t){e.appFetch({method:"post",url:"addSign",data:{image:t}},(function(t){0==t.e?(e.$message.success({message:"上传成功！"}),e.signInfo=t.d):e.$message.error({message:"上传失败！"})}))}this.uploadimage(t,a)},upload2:function(){var e=this,t=document.querySelector("#upload2").files[0];if(!t.name.endsWith(".png"))return this.$message.warning("只可上传png格式"),void $("#upload2").val("");function a(t){e.appFetch({method:"post",url:"signChangeImage",data:{image:t}},(function(a){0==a.e?(e.$message.success({message:"上传成功！"}),e.$set(e.signInfo,"image",JSON.parse(window.sessionStorage.officeDb_getSiteConfig).imghost+"/"+t)):e.$message.error({message:"上传失败！"})}))}this.uploadimage(t,a)},uploadimage:function(e,t){var a=this,s=new FormData;s.append("upfile",e);var i=null;i=window.XMLHttpRequest?new XMLHttpRequest:window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):null,i&&(i.open("post","".concat(this.appConfig.apiBaseUrl,"/api/upload/index?category=image")),i.send(s),i.onload=function(e){var s=JSON.parse(e.currentTarget.response);"SUCCESS"==s.state?t(s.url):a.$message.error({message:"上传失败！"}),$("#upload1").val(""),$("#upload2").val("")},i.error=function(){a.$message.error({message:"上传失败！"}),$("#upload1").val(""),$("#upload2").val("")})}}},V=Object(n["a"])({name:"signature"},P),I=V,O=Object(m["a"])(I,j,E,!1,null,null,null),z=O.exports,N=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("ul",{staticClass:"handle-main"},[s("li",{staticClass:"handle-main-nameSeals personalSeals"},[s("div",[s("div",{staticClass:"nameSeals-left"},[s("img",{attrs:{src:""==e.Seal_info.image?"../../static/img/sign.png":e.Seal_info.image,alt:""}})]),e._v(" "),s("div",{staticClass:"nameSeals-right"},[s("label",{attrs:{for:"upload3"}},[s("input",{staticClass:"fileinput",attrs:{type:"file",id:"upload3"},on:{change:e.upload3}}),e._v("\n            "+e._s(""==e.Seal_info?"添加签章":"变更签章")+"\n          ")])])])])]),e._v(" "),e.specialShow?e._e():s("div",{staticClass:"handle-lists"},[s("div",{staticClass:"handle-lists-tit"},[s("div",{staticClass:"dian"}),e._v(" "),s("a",{staticClass:"first_a",attrs:{href:"javascript:;"},on:{click:function(t){return e.getHistory(1)}}},[e._v("使用记录")]),e._v(" "),s("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("全部导出")])]),e._v(" "),s("ul",{staticClass:"handle-lists-data"},e._l(e.userSealList,(function(t){return s("li",[s("a",{attrs:{href:"javascript:;"}},[s("p",{domProps:{textContent:e._s(t.app_name)}}),e._v(" "),s("span",{domProps:{textContent:e._s(t.created)}})])])})),0),e._v(" "),e.userSealList.length>0?s("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.totalPage,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.getHistory}}):e._e()],1),e._v(" "),s("el-dialog",{attrs:{title:"导出",visible:e.dialogVisible,width:"400px","lock-scroll":!1,center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("el-date-picker",{attrs:{type:"daterange","unlink-panels":"","value-format":"yyyy-MM-dd"},model:{value:e.daochutime,callback:function(t){e.daochutime=t},expression:"daochutime"}}),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary",width:"70%"},on:{click:e.daochu}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{attrs:{visible:e.showUpdate,width:"400px","lock-scroll":!1,center:""},on:{"update:visible":function(t){e.showUpdate=t}}},[s("ul",{staticClass:"addSeal"},[s("li",[s("a",{attrs:{href:"javascript:;"}},[e._v("姓名")]),e._v(" "),s("span",{domProps:{textContent:e._s(e.user_info.name)}})]),e._v(" "),s("li",[s("a",{attrs:{href:"javascript:;"}},[e._v("身份证号")]),e._v(" "),s("span",{domProps:{textContent:e._s(e.user_info.id_card)}})]),e._v(" "),s("li",[s("a",{attrs:{href:"javascript:;"}},[e._v("手机号码")]),e._v(" "),s("span",{domProps:{textContent:e._s(e.user_info.mobile)}})])]),e._v(" "),s("a",{staticClass:"addSealtip",attrs:{href:"javascript:;"}},[s("img",{attrs:{src:a("38c2"),alt:""}}),e._v("如信息有误，请转至个人中心修改\n    ")]),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary",width:"70%"},on:{click:e.updateSeal}},[e._v("确 定")])],1)])],1)},M=[],B=(a("e35a"),a("5e9f"),{data:function(){return{user_info:!1,Seal_info:"",userSealList:[],pageSize:20,totalPage:0,currentPage:1,dialogVisible:!1,daochutime:[],addSealimg:"",showUpdate:!1,specialShow:"/v2/ucenter/seal"==window.location.pathname,uploadUrl:U["a"].getApi("uploadindex")}},created:function(){var e=this;this.appFetch({method:"get",url:"sealUserInfo"},(function(t){0==t.e?e.user_info=t.d:e.$message.error({message:"获取个人信息失败！"})})),this.appFetch({method:"get",url:"sealInfo"},(function(t){0==t.e?(e.Seal_info=t.d,e.getHistory(1)):e.$message.error({message:"获取名章信息失败！"})}))},methods:{getHistory:function(e){var t=this;t.appFetch({method:"get",url:"sealHistory",data:{seal_id:t.Seal_info.id,p:e}},(function(e){0==e.e?(t.userSealList=e.d.data,t.pageSize=e.d.perpage,t.currentPage=e.d.page,t.totalPage=e.d.total):t.$message.error({message:"获取名章使用记录失败！"})}))},upload3:function(e){var t=this,a=document.querySelector("#upload3").files[0];function s(e){t.appFetch({method:"get",url:"sealChangeImagenew",data:{image:e}},(function(a){0==a.e?(t.Seal_info.image=JSON.parse(window.sessionStorage.officeDb_getSiteConfig).imghost+"/"+e,t.$message.success({message:"上传成功！"})):t.$message.error({message:"请求失败，请稍后重试！"})}))}t.uploadimage(a,s)},upload4:function(){var e=this,t=document.querySelector("#upload4").files[0];function a(t){e.addSealimg=JSON.parse(window.sessionStorage.officeDb_getSiteConfig).imghost+"/"+t}e.uploadimage(t,a)},updateSeal:function(){var e=this;""!=e.user_info.mobile?""!=e.user_info.id_card?(e.appFetch({method:"get",url:"sealUpdateSeal"},(function(t){0==t.e?e.$message.success({message:"修改成功"}):e.$message.error({message:t.m})})),e.showUpdate=!1):e.$message.warning({message:"身份证号不为空"}):e.$message.warning({message:"手机号不为空"})},addSeals:function(){var e,t=this;""!=t.user_info.mobile?""!=t.user_info.id_card?(e=""!=t.addSealimg?{mobile:t.user_info.mobile,image:t.addSealimg.replace(t.appConfig.upImageUrl,"")}:{mobile:t.user_info.mobile},t.appFetch({method:"post",url:"addSeal",data:e},(function(e){0==e.e?(t.Seal_info.image=t.addSealimg,t.$message.success({message:"上传成功！"})):t.$message.error({message:e.m})})),t.dialogVisible=!1):t.$message.warning({message:"身份证号不为空"}):t.$message.warning({message:"手机号不为空"})},daochu:function(){if(null!=this.daochutime&&0!=this.daochutime.length)if(this.dialogVisible=!1,0!=this.userSealList.length){var e={s:this.Seal_info.seal_user.seal_id,u:this.Seal_info.id,t:this.daochutime[0],e:this.daochutime[1]};window.open(this.appConfig.apiBaseUrl+"/site/seal/export-seal-history?seal_id="+e.u+"&start_time="+e.t+"&end_time="+e.e,"_blank")}else this.$message.warning({message:"暂无可导出数据！"});else this.$message.warning({message:"请选择时间区间！"})},uploadimage:function(e,t){var a=this;if(void 0!=e){var s=new FormData;s.append("upfile",e);var i=null;i=window.XMLHttpRequest?new XMLHttpRequest:window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):null,i&&(i.open("post","".concat(this.appConfig.apiBaseUrl,"/api/upload/index?category=image")),i.send(s),i.onload=function(e){var s=JSON.parse(e.currentTarget.response);"SUCCESS"==s.state?t(s.url):a.$message.error({message:"上传失败！"}),$("#upload3").val(""),$("#upload4").val("")},i.error=function(){a.$message.error({message:"上传失败！"}),$("#upload3").val(""),$("#upload4").val("")})}else this.$message.warning({message:"未选择图片！"})}}}),G=Object(n["a"])({name:"personSeal"},B),R=G,W=Object(m["a"])(R,N,M,!1,null,null,null),J=W.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ul",{staticClass:"handle-main"},e._l(e.personOfficialSealList,(function(t){return a("li",{staticClass:"handle-main-offivialSeal",class:{active:t.seal_id==e.seal_id},on:{click:function(a){return e.changeoffice(t.seal_id)}}},[a("div",[a("div",{staticClass:"offivialSeal-left"},[a("img",{attrs:{src:t.image,alt:""}})]),e._v(" "),a("div",{staticClass:"offivialSeal-right"},[a("p",[e._v(e._s(t.name))]),e._v(" "),a("p",[e._v("所属部门: "+e._s(t.depart_name))])])])])})),0),e._v(" "),e.personOfficialSealList.length>0&&!e.specialShow?e._e():a("div",{staticStyle:{height:"52px"}}),e._v(" "),a("div",{staticClass:"handle-lists"},[a("div",{staticClass:"handle-lists-tit"},[a("div",{staticClass:"dian"}),e._v(" "),a("a",{staticClass:"first_a",attrs:{href:"javascript:;"}},[e._v("使用记录")]),e._v(" "),a("a",{attrs:{href:"javascript:;"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("全部导出")])]),e._v(" "),a("ul",{staticClass:"handle-lists-data"},e._l(e.usesList,(function(t){return a("li",[a("a",{attrs:{href:"javascript:;"}},[a("p",{domProps:{textContent:e._s(t.app_name)}}),e._v(" "),a("span",{domProps:{textContent:e._s(t.created)}})])])})),0),e._v(" "),e.usesList.length>0?a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.totalPage,"page-size":e.pageSize,"current-page":e.currentPage},on:{"current-change":e.getHistory}}):e._e()],1),e._v(" "),a("el-dialog",{attrs:{title:"导出",visible:e.dialogVisible,width:"400px","lock-scroll":!1,center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-date-picker",{attrs:{type:"daterange","unlink-panels":"","value-format":"yyyy-MM-dd"},model:{value:e.daochutime,callback:function(t){e.daochutime=t},expression:"daochutime"}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",width:"70%"},on:{click:e.daochu}},[e._v("确 定")])],1)],1)],1)},Q=[],Y={data:function(){return{personOfficialSealList:[],user_info:!1,seal_id:"",usesList:[],pageSize:20,currentPage:1,totalPage:0,dialogVisible:!1,daochutime:[],specialShow:"/v2/ucenter/seal"==window.location.pathname}},created:function(){var e=this;this.appFetch({method:"get",url:"personOfficialSealListnew"},(function(t){if(0==t.e){var a=[];for(var s in t.d)a.push(t.d[s]);e.personOfficialSealList=a,e.seal_id=e.personOfficialSealList[0].seal_id,e.getHistory(1)}else e.$message.error({message:"获取公章信息失败！"})})),this.appFetch({method:"get",url:"sealUserInfo"},(function(t){0==t.e?e.user_info=t.d:e.$message.error({message:"获取个人信息失败！"})}))},methods:{getHistory:function(e){var t=this;this.appFetch({method:"get",url:"sealHistory",data:{seal_id:t.seal_id,p:e}},(function(e){0==e.e?(t.usesList=e.d.data,t.pageSize=e.d.perpage,t.currentPage=e.d.page,t.totalPage=e.d.total):t.$message.error({message:"获取公章使用记录失败！"})}))},changeoffice:function(e){e!=this.seal_id&&(this.seal_id=e,this.getHistory(1))},daochu:function(){if(null!=this.daochutime&&0!=this.daochutime.length)if(this.dialogVisible=!1,this.personOfficialSealList.length<1)this.$message.warning({message:"您没有公章！"});else if(this.usesList.length<1)this.$message.warning({message:"暂无公章使用记录！"});else{var e={s:this.seal_id,u:this.user_info.id,t:this.daochutime[0],e:this.daochutime[1]};window.open(this.appConfig.apiBaseUrl+"/site/seal/export-seal-history?seal_id="+e.s+"&start_time="+e.t+"&end_time="+e.e,"_blank")}else this.$message.warning({message:"请选择时间区间！"})}}},Z=Object(n["a"])({name:"officeSeal"},Y),q=Z,X=Object(m["a"])(q,H,Q,!1,null,null,null),K=X.exports,ee=(a("b130"),a("90aa"),{data:function(){var e=this,t=function(t,a,s){""===a?s(new Error("请输入密码")):a.length>6?s(new Error("长度不能大于6位")):(""!==e.ruleForm2.checkPass&&e.$refs.ruleForm2.validateField("checkPass"),s())},a=function(t,a,s){""===a?s(new Error("请再次输入密码")):a!==e.ruleForm2.pass?s(new Error("两次输入密码不一致!")):s()};return{cancelpages:"signature",arr:["signature"],pwdDialog:!1,notValidate:!1,ruleForm2:{pass:"",checkPass:""},rules2:{pass:[{validator:t,trigger:"blur"}],checkPass:[{validator:a,trigger:"blur"}]}}},created:function(){var e=this;this.$route.query.sealType&&(this.cancelpages=this.$route.query.sealType,this.arr=[this.$route.query.sealType]),this.appFetch({url:"sealConfig",method:"get"},(function(t){0==t.e?e.notValidate=!!t.d.not_validate:e.$message.error(t.m)}),(function(t){e.$message.error("系统错误")}))},methods:{setroute:function(e){this.arr.includes(e)||this.arr.push(e),this.cancelpages=e},submitForm:function(){var e=this;this.$refs.ruleForm2.validate((function(t){if(!t)return console.log("error submit!!"),!1;e.appFetch({url:"sealSetPwd",method:"post",data:{password:e.ruleForm2.pass,confirm_password:e.ruleForm2.checkPass}},(function(t){0==t.e?(e.pwdDialog=!1,e.$message.success("设置成功"),e.$refs.ruleForm2.resetFields()):e.$message.error(t.m)}),(function(t){e.$message.error("系统错误")}))}))},notValidateF:function(){var e=this;this.appFetch({url:"setSealCheck",method:"get"},(function(t){0==t.e?e.$message.success("设置成功"):e.$message.error(t.m)}),(function(t){e.$message.error("系统错误")}))}}}),te=Object(n["a"])({components:{signature:z,personSeal:J,officeSeal:K}},ee),ae=te,se=Object(m["a"])(ae,L,F,!1,null,null,null),ie=se.exports,ne=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main-bottom-right"},[s("div",{staticClass:"main-bottom-right-handle"},[s("div",{staticClass:"main-top-title"},[s("p",[e._v("登录授权")]),e._v(" "),s("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addath}},[e._v("添加授权")])],1),e._v(" "),s("div",{attrs:{id:"loginauth"}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.hasauthlist}},[s("el-table-column",{attrs:{label:"授权用户",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.grant_name))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"学工号",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(t.row.number))])]}}])}),e._v(" "),s("el-table-column",{attrs:{label:"授权时间",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s((t.row.stime+"").slice(0,10))+" 至 "+e._s((t.row.etime+"").slice(0,10)))])]}}])}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{staticStyle:{width:"58px",height:"30px",color:"#4285F4"},attrs:{size:"mini"},on:{click:function(a){return e.edit(t.row,t.$index)}}},[e._v("编辑")]),e._v(" "),s("el-button",{staticStyle:{width:"58px",height:"30px",color:"rgba(234,67,53,1)"},attrs:{size:"mini"},on:{click:function(a){return e.del(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),s("div",{staticClass:"modal",attrs:{role:"dialog","aria-labelledby":"myModalLabel"},on:{click:function(t){return t.target!==t.currentTarget?null:e.showmodel(t)}}},[s("div",[s("img",{attrs:{src:a("a499"),alt:""},on:{click:e.showmodel}}),e._v(" "),s("el-form",{attrs:{"label-position":"right","label-width":"120px"}},[s("el-form-item",{attrs:{label:"授权用户"}},[s("el-input",{attrs:{id:"inputEmail3",placeholder:"通过学号或姓名搜索人员"},on:{input:e.searchpersonal,propertychange:e.searchpersonal},model:{value:e.authper.grant_name,callback:function(t){e.$set(e.authper,"grant_name",t)},expression:"authper.grant_name"}}),e._v(" "),s("ul",{directives:[{name:"show",rawName:"v-show",value:0!=e.perlist.length,expression:"perlist.length != 0"}],attrs:{id:"personlist"},on:{scroll:function(t){1==e.block&&e.loadmore(t)}}},e._l(e.perlist,(function(t){return s("li",{on:{click:function(a){return e.chooseperson(t)}}},[s("span",[e._v(e._s(t.name))]),e._v(" "),s("span",[e._v(e._s(t.number))]),e._v(" "),s("span",[e._v(e._s(t.college))])])})),0)],1),e._v(" "),s("el-form-item",{attrs:{label:"授权起始日期"}},[s("el-date-picker",{attrs:{id:"inputPassword2",type:"date",placeholder:"选择日期"},model:{value:e.stime,callback:function(t){e.stime=t},expression:"stime"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"授权终止日期"}},[s("el-date-picker",{attrs:{id:"inputPassword3",type:"date",placeholder:"选择日期"},model:{value:e.etime,callback:function(t){e.etime=t},expression:"etime"}})],1),e._v(" "),s("el-form-item",{attrs:{label:" "}},[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submitauth}},[e._v("保存")])],1)],1)],1)])],1)])])},re=[],le=(a("b4fb"),{data:function(){return{authper:{},hasauthlist:[],perlist:[],stime:"",etime:"",type:"",index:"",p:1,block:!0}},methods:{showmodel:function(){$(".modal").fadeToggle("fast")},addath:function(){this.initpop(!1,""),this.showmodel(),this.type="add"},submitauth:function(){var e=this;if(e.authper.stime=e.stime,e.authper.etime=e.etime,e.authper.id=void 0==e.authper.id?0:e.authper.id,0==e.authper.grant_uid)return e.$message.error({message:"请选择用户"}),!1;e.appFetch({method:"post",url:"savegrantlists",data:e.authper},(function(t){0==t.e?(e.initpersonlist(),e.$message.success({message:t.m})):e.$message.error({message:t.m})})),e.showmodel()},edit:function(e,t){this.authper=JSON.parse(JSON.stringify(e)),this.stime=new Date(e.stime),this.etime=new Date(e.etime),this.index=t,this.type="edit",this.showmodel()},del:function(e){var t=this,a=this;this.authper=JSON.parse(JSON.stringify(e)),this.$MessageBox.confirm("是否永久删除对"+e.grant_name+"的授权?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",lockScroll:!1,type:"warning"}).then((function(){a.appFetch({method:"get",url:"delgrantlists",data:{id:a.authper.id}},(function(e){0==e.e?(a.initpersonlist(),a.$message({type:"success",message:"删除成功!"})):a.$message.error({message:e.m})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},chooseperson:function(e){this.authper.grant_name=e.name,this.authper.grant_uid=e.uid},searchpersonal:function(){var e=this;e.block=!1,e.perlist=[],e.appFetch({method:"get",url:"sitesearchuser",data:{type:"name",keyword:e.authper.grant_name,p:1}},(function(t){0==t.e?(e.$set(e,"perlist",t.d.data),e.p=1,e.block=!0,document.addEventListener("click",(function(t){e.perlist=[]}),!1)):e.$message.error({message:t.m})}))},loadmore:function(e){for(var t=e.currentTarget,a=this,s=0,i=0;i<t.children.length;i++)s+=t.children[i].offsetHeight;s-t.offsetHeight-20<t.scrollTop&&(this.p=this.p+1,this.block=!1,a.appFetch({method:"get",url:"sitesearchuser",data:{type:"name",keyword:this.authper.grant_name,p:this.p}},(function(e){0==e.e?(a.perlist=a.perlist.concat(e.d.data),e.d.total<e.d.page*e.d.perpage?(a.$message.info({message:"已经到底部了"}),a.block=!1):a.block=!0):a.$message.error({message:e.m})})))},initpop:function(e,t){this.stime=new Date,this.etime=new Date,this.authper={uid:e,name:t}},initpersonlist:function(){var e=this;this.appFetch({method:"get",url:"getgrantlists"},(function(t){0==t.e?e.hasauthlist=t.d:e.$message.error({message:t.m})}))}},created:function(){this.initpersonlist(),this.initpop(!1,"")}}),oe=Object(n["a"])({name:"autograph"},le),ce=oe,ue=Object(m["a"])(ce,ne,re,!1,null,null,null),de=ue.exports,pe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main-bottom-right entrust",staticStyle:{background:"#fff"}},[s("div",{staticClass:"main-top-title"},[s("p",[e._v("委托审批")]),e._v(" "),s("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.addEntrust()}}},[e._v("添加委托")])],1),e._v(" "),s("div",{attrs:{id:"loginauth"}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[s("el-table-column",{attrs:{label:"委托时间",prop:"time",width:"220"}}),e._v(" "),s("el-table-column",{attrs:{label:"委托事项",prop:"service_text",width:"400"}}),e._v(" "),s("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{staticClass:"editor",attrs:{size:"mini"},on:{click:function(a){return e.addEntrust(t.row,t.$index)}}},[e._v("编辑")]),e._v(" "),s("button",{class:"停用"==t.row.status_text?"W_warning":"W_success",on:{click:function(a){return e.changeState(t.row,t.$index)}}},[e._v(e._s("停用"==t.row.status_text?"停用":"启用"))]),e._v(" "),s("el-button",{staticClass:"delCol",attrs:{size:"mini"},on:{click:function(a){return e.del(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),s("el-dialog",{staticClass:"entruststyle",attrs:{title:"委托设置",visible:e.centerDialogVisible,width:"34%","lock-scroll":!1,center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[s("el-form",{attrs:{model:e.form}},[s("el-form-item",{attrs:{label:"委托时间","label-width":e.formLabelWidth,id:"zq"}},[s("el-date-picker",{attrs:{width:"100%","value-format":"timestamp",type:"daterange",clearable:!e.centerDialogVisible,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.newTableData.dayTimt,callback:function(t){e.$set(e.newTableData,"dayTimt",t)},expression:"newTableData.dayTimt"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"委托事项","label-width":e.formLabelWidth}},[s("el-radio",{attrs:{label:"1"},model:{value:e.newTableData.radio,callback:function(t){e.$set(e.newTableData,"radio",t)},expression:"newTableData.radio"}},[e._v("全部事项")]),e._v(" "),s("br"),e._v(" "),s("el-radio",{attrs:{label:"2"},model:{value:e.newTableData.radio,callback:function(t){e.$set(e.newTableData,"radio",t)},expression:"newTableData.radio"}},[e._v("部分事项")]),e._v(" "),s("el-select",{directives:[{name:"show",rawName:"v-show",value:2==e.newTableData.radio,expression:"newTableData.radio == 2"}],key:1,staticStyle:{width:"88%"},attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:" 服务事项名称","remote-method":e.remoteMethod,loading:e.loading},model:{value:e.newTableData.getedChange,callback:function(t){e.$set(e.newTableData,"getedChange",t)},expression:"newTableData.getedChange"}},e._l(e.newTableData.canGetChange,(function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),s("el-form-item",{attrs:{label:"委托人员","label-width":e.formLabelWidth}},[s("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:function(t){return e.selectPop("super",0)}}},[e._v("添加人员")]),e._v(" "),e.newTableData.chooseResult.length>0?e._l(e.newTableData.chooseResult,(function(t,i){return s("span",{key:i,staticStyle:{"margin-left":"5px"}},[e._v("\n            "+e._s(t.name)+"\n            "),s("img",{staticStyle:{position:"relative",top:"3px",cursor:"pointer"},attrs:{src:a("abfe")},on:{click:function(t){return e.deleteDepart(i)}}})])})):e._e()],2)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.offCenterDialogVisible}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.addEntrustlist}},[e._v("确 定")])],1)],1),e._v(" "),s("newpop",{directives:[{name:"show",rawName:"v-show",value:e.showall,expression:"showall"}],ref:"newpop",attrs:{settype:e.form.settype,showConf:e.form.showConf,hasChooseList:e.newTableData.chooseResult,before:1,isSite:!0},on:{getBackData:e.closePop}})],1)},he=[],me=(a("dbb3"),a("2eeb"),{data:function(){return{tableData:[],nowid:-1,nownum:-1,list:[],loading:!1,states:[],showall:!1,centerDialogVisible:!1,formLabelWidth:"120px",newTableData:{dayTimt:[],radio:-1,chooseResult:[],getedChange:[],canGetChange:[]},form:{name:"",settype:"users",showConf:{}}}},mounted:function(){var e=this;this.appFetch({method:"get",url:"entrustList"},(function(t){0==t.e?e.tableData=t.d.data:e.$message({type:"warning",message:t.m})}))},methods:{changeState:function(e){var t=this;this.appFetch({method:"get",url:"changeEntruststate",data:{id:e.id}},(function(a){0==a.e?(t.$message({type:"success",message:("停用"==e.status_text?"停用":"启用")+"成功！"}),t.getList()):t.$message({type:"warning",message:a.m})}))},getList:function(){var e=this;this.appFetch({method:"get",url:"entrustList"},(function(t){0==t.e?e.tableData=t.d.data:e.$message({type:"warning",message:t.m})}))},remoteMethod:function(e){var t=this;""!==e?(this.loading=!0,setTimeout((function(){t.loading=!1,t.newTableData.canGetChange=t.states.filter((function(t){return t.name.indexOf(e)>-1}))}),200)):this.newTableData.canGetChange=[]},del:function(e,t){var a=this,s=this;this.$MessageBox.confirm("此操作将永久删除该委托, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",lockScroll:!1,type:"warning"}).then((function(){a.appFetch({method:"get",url:"deleteEntrust",data:{id:t.id}},(function(t){0==t.e?(s.tableData.splice(e,1),s.$message({type:"success",message:"删除成功!"})):s.$message({type:"warning",message:t.m})}))})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},addEntrustlist:function(){if(0===this.newTableData.dayTimt.length||-1==this.newTableData.radio||0===this.newTableData.chooseResult.length||0==this.newTableData.getedChange.length&&"2"==this.newTableData.radio)this.$message({type:"info",message:"请将内容填写完整！"});else{var e=this,t=this.newTableData.chooseResult.map((function(e){return e.id}));-1!=this.nownum?this.appFetch({method:"POST",url:"changeEntrust",data:{id:this.nowid,start_time:this.newTableData.dayTimt[0]/1e3,end_time:this.newTableData.dayTimt[1]/1e3,uids:t,appids:"1"==e.newTableData.radio?0:this.newTableData.getedChange}},(function(t){0==t.e?(e.getList(),e.$message({type:"success",message:"修改委托成功~"})):e.$message({type:"warning",message:t.m})})):this.appFetch({method:"POST",url:"newEntrust",data:{start_time:this.newTableData.dayTimt[0]/1e3,end_time:this.newTableData.dayTimt[1]/1e3,uids:t,appids:"1"==this.newTableData.radio?0:this.newTableData.getedChange}},(function(t){0==t.e?(e.getList(),e.$message({type:"success",message:"添加委托成功~"})):e.$message({type:"warning",message:t.m})})),this.centerDialogVisible=!1}},offCenterDialogVisible:function(){this.centerDialogVisible=!1},deleteDepart:function(e){this.newTableData.chooseResult.splice(e,1)},closePop:function(e){e&&(this.newTableData.chooseResult=e),this.showall=!1,this.centerDialogVisible=!0},addEntrust:function(e,t){if(e){this.nowid=e.id,this.nownum=t;var a=this;this.appFetch({method:"GET",url:"getonceEntrust",data:{id:e.id}},(function(e){if(console.log(e),0==e.e){var t=0,s=0;if("全部事项"==e.d.service_arr)a.newTableData.radio="1";else for(var i in a.newTableData.radio="2",e.d.service_arr)Vue.set(a.newTableData.getedChange,s,i),Vue.set(a.newTableData.canGetChange,s,{id:i,name:e.d.service_arr[i]}),s++;for(var n in e.d.uid_arr)Vue.set(a.newTableData.chooseResult,t,{id:n,name:e.d.uid_arr[n]}),t++;Vue.set(a.newTableData.dayTimt,0,new Date(e.d.start_time).valueOf()),Vue.set(a.newTableData.dayTimt,1,new Date(e.d.end_time).valueOf())}else a.$message({type:"warning",message:e.m})}))}else this.nownum=-1;this.centerDialogVisible=!0},selectPop:function(e,t){this.centerDialogVisible=!1,this.$refs.newpop.title="选择人员",this.$refs.newpop.tabList=["部门","岗位","标签"],this.$refs.newpop.selectType=2,this.form.showConf={before:!0,showStruct:!1,showDepart:!0,showJob:!0,showTag:!0,showPerson:!1,mode:""},this.$refs.newpop.changeType=!!t,this.showall=!0}},watch:{centerDialogVisible:function(){var e=this;this.showall===this.centerDialogVisible&&(this.newTableData={dayTimt:[],radio:-1,chooseResult:[],getedChange:[],canGetChange:[]}),0==this.states.length&&this.appFetch({method:"get",url:"appSearch",data:{}},(function(t){0==t.e?e.states=t.d.map((function(e){return{name:e.name,id:e.id}})):e.$message({type:"warning",message:t.m})}))}}}),ge=Object(n["a"])({name:"committalCharge",components:{newpop:r["g"]}},me),fe=ge,ve=Object(m["a"])(fe,pe,he,!1,null,null,null),we=ve.exports,_e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-bottom-right entrust",staticStyle:{background:"#fff"}},[a("div",{attrs:{id:"scientificUser"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"授权用户",prop:"name",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"学工号",prop:"number",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"授权时间",prop:"created",width:"360"}}),e._v(" "),a("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-button",{attrs:{size:"mini",plain:""},on:{click:e.showNewpop}},[e._v("添加人员")])]}},{key:"default",fn:function(t){return[a("el-button",{staticStyle:{"margin-right":"12px"},attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.delUser(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),e.total>20?a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.total,"page-size":20,"current-page":e.p},on:{"current-change":e.currentPage}}):e._e()],1),e._v(" "),a("newpop",{directives:[{name:"show",rawName:"v-show",value:e.showall,expression:"showall"}],ref:"newpop",attrs:{settype:"users",showConf:e.showConf,hasChooseList:[],before:1,isSite:!0},on:{getBackData:e.closePop}})],1)},be=[],ye={data:function(){return{tableData:[],showConf:{},showall:!1,total:0,p:1}},created:function(){this.getUserList()},methods:{closePop:function(e){if(e&&e.length){var t=e.map((function(e){return e.id}));this.addUser(t)}this.showall=!1},showNewpop:function(){this.$refs.newpop.selectType=2,this.showConf={showStruct:!1,showDepart:!0,showJob:!0,showTag:!0,showPerson:!1,mode:"",before:1},this.showall=!0},addUser:function(e){var t=this;this.appFetch({url:"addScientificUser",method:"post",data:{uids:e}},(function(e){0==e.e?(t.$message.success("添加成功"),t.getUserList()):t.$message.error(e.m)}),(function(e){t.$message.error("系统错误")}))},getUserList:function(){var e=this;this.appFetch({url:"scientificUserList",method:"get",data:{p:this.p}},(function(t){0==t.e?(e.tableData=t.d.data,e.total=t.d.total):e.$message.error(t.m)}),(function(t){e.$message.error("系统错误")}))},delUser:function(e){var t=this;this.$MessageBox.confirm("是否确定删除此人员?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",lockScroll:!1,type:"warning"}).then((function(){t.appFetch({url:"scientificUserDel",method:"post",data:{id:e.id}},(function(e){0==e.e?t.getUserList():t.$message.error(e.m)}),(function(e){t.$message.error("系统错误")}))}))},currentPage:function(e){this.p=e,this.getUserList()}}},xe=Object(n["a"])({name:"scientificUser",components:{newpop:r["g"]}},ye),Ce=xe,ke=Object(m["a"])(Ce,_e,be,!1,null,null,null),Se=ke.exports,De=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-bottom-right entrust weituoshenqing",staticStyle:{background:"#fff"}},[a("div",{staticClass:"main-top-title"},[e._m(0),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.addEntrust()}}},[e._v("添加委托")])],1),e._v(" "),a("div",{attrs:{id:"loginauth"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"委托人",prop:"user_name",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"委托事项",prop:"service_text",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{label:"委托时间",prop:"time",width:"250"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"editor",attrs:{size:"mini"},on:{click:function(a){return e.addEntrust(t.row)}}},[e._v("编辑")]),e._v(" "),a("button",{class:0==t.row.status?"W_warning":"W_success",on:{click:function(a){return e.changeStatus(t.row)}}},[e._v(e._s(0==t.row.status?"停用":"启用"))]),e._v(" "),a("el-button",{staticClass:"delCol",attrs:{size:"mini"},on:{click:function(a){return e.del(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),e.total>20?a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.total,"page-size":20,"current-page":e.p},on:{"current-change":e.changePage}}):e._e()],1),e._v(" "),a("el-dialog",{staticClass:"entruststyle",attrs:{title:"委托设置",visible:e.centerDialogVisible,width:"500px","lock-scroll":!1,center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"委托时间","label-width":e.formLabelWidth,id:"zq"}},[a("el-date-picker",{attrs:{width:"315px","value-format":"yyyy-MM-dd",type:"daterange",clearable:!e.centerDialogVisible,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.newTableData.date,callback:function(t){e.$set(e.newTableData,"date",t)},expression:"newTableData.date"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"委托事项","label-width":e.formLabelWidth}},[a("el-radio",{attrs:{label:"1"},model:{value:e.newTableData.radio,callback:function(t){e.$set(e.newTableData,"radio",t)},expression:"newTableData.radio"}},[e._v("全部事项")]),e._v(" "),a("br"),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.newTableData.radio,callback:function(t){e.$set(e.newTableData,"radio",t)},expression:"newTableData.radio"}},[e._v("部分事项")]),e._v(" "),a("el-select",{directives:[{name:"show",rawName:"v-show",value:2==e.newTableData.radio,expression:"newTableData.radio == 2"}],staticStyle:{width:"88%"},attrs:{multiple:"",filterable:"",placeholder:" 服务事项名称"},model:{value:e.newTableData.apps,callback:function(t){e.$set(e.newTableData,"apps",t)},expression:"newTableData.apps"}},e._l(e.apps,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"委托人员","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"145px"},attrs:{placeholder:"姓名"},model:{value:e.newTableData.user_name,callback:function(t){e.$set(e.newTableData,"user_name","string"===typeof t?t.trim():t)},expression:"newTableData.user_name"}}),e._v(" "),a("el-input",{staticStyle:{"margin-left":"3px",width:"163px"},attrs:{placeholder:e.$t("system.numberText")},model:{value:e.newTableData.user_number,callback:function(t){e.$set(e.newTableData,"user_number","string"===typeof t?t.trim():t)},expression:"newTableData.user_number"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addEntrustlist}},[e._v("确 定")])],1)],1)],1)},Te=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("委托申请"),a("span",[e._v("提示：委托他人替我发起申请")])])}],Ae=(a("fe59"),a("9302"),a("0d7a"),a("08ba"),{data:function(){return{apps:[],tableData:[],p:1,total:0,formLabelWidth:"100px",centerDialogVisible:!1,newTableData:{date:[],radio:"1",apps:[],user_name:"",user_number:""},loading:!1}},created:function(){this.getList(),this.getApps()},methods:{getList:function(){var e=this;this.appFetch({url:"getAgentList",method:"get",data:{p:this.p,agent_type:0}},(function(t){0==t.e?(t.d.data.forEach((function(e){e.service_text=e.app_name.join("、"),e.time="".concat(e.start_time.split(" ")[0]," 至 ").concat(e.end_time.split(" ")[0])})),e.tableData=t.d.data,e.total=t.d.total):e.$message.error(t.m)}),(function(t){e.$message.error("系统错误")}))},getApps:function(){var e=this;this.appFetch({method:"get",url:"siteAllList",data:{}},(function(t){0==t.e?e.apps=t.d.list.map((function(e){return{name:e.name,id:e.id}})):e.$message({type:"warning",message:t.m})}),(function(t){e.$message.error("系统错误")}))},addEntrust:function(e){var t=this;e?this.appFetch({url:"agentInfo",method:"get",data:{id:e.id}},(function(e){0==e.e?(t.newTableData={id:e.d.id,date:[e.d.start_time.split(" ")[0],e.d.end_time.split(" ")[0]],radio:e.d.app_id.length?"2":"1",apps:e.d.app_id.map((function(e){return e.id})),user_name:e.d.user_name,user_number:e.d.user_number},t.centerDialogVisible=!0):t.$message.error(e.m)}),(function(e){t.$message.error("系统错误")})):(this.newTableData={date:[],radio:"1",apps:[],user_name:"",user_number:""},this.centerDialogVisible=!0)},addEntrustlist:function(){var e=this;this.newTableData.date.length?this.newTableData.user_name&&this.newTableData.user_number?2!=this.newTableData.radio||this.newTableData.apps.length?this.appFetch({url:"saveAgent",method:"post",data:{id:this.newTableData.id,agent_type:0,start_time:this.newTableData.date[0],end_time:this.newTableData.date[1],user_name:this.newTableData.user_name,user_number:this.newTableData.user_number,app_id:1==this.newTableData.radio?JSON.stringify([]):JSON.stringify(this.newTableData.apps)}},(function(t){0==t.e?(e.getList(),e.centerDialogVisible=!1):501==t.e?e.$message.error("".concat(e.newTableData.user_number,"不在系统中请修改").concat(e.$t("system.numberText"))):502==t.e?e.$message.error("".concat(e.newTableData.user_name," 和 ").concat(e.newTableData.user_number," 不匹配，请重新输入")):505==t.e?e.$message.error("不能自己作为委托人"):e.$message.error(t.m)}),(function(t){e.$message.error("系统错误")})):this.$message.warning("请选择事项"):this.$message.warning("请输入委托人员信息"):this.$message.warning("请选择委托时间")},changeStatus:function(e){var t=this;this.appFetch({url:"changeAgentStatus",method:"post",data:{id:e.id,status:e.status?0:1}},(function(e){0==e.e?t.getList():t.$message.error(e.m)}),(function(e){t.$message.error("系统错误")}))},del:function(e){var t=this;this.$MessageBox.confirm("此操作将永久删除该委托, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",lockScroll:!1,type:"warning"}).then((function(){t.appFetch({url:"delAgent",method:"post",data:{id:e.id}},(function(e){0==e.e?t.getList():t.$message.error(e.m)}),(function(e){t.$message.error("系统错误")}))})).catch((function(){}))},changePage:function(e){this.p=e,this.getList()}}}),$e=Object(n["a"])({},Ae),Le=$e,Fe=Object(m["a"])(Le,De,Te,!1,null,null,null),je=Fe.exports,Ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-bottom-right entrust weituoshenqing",staticStyle:{background:"#fff"}},[a("div",{staticClass:"main-top-title"},[e._m(0),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.addEntrust()}}},[e._v("添加委托")])],1),e._v(" "),a("div",{attrs:{id:"loginauth"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"委托人",prop:"user_name",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"原申请人",prop:"origin_user_name",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"委托事项",prop:"service_text",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"委托时间",prop:"time",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"editor",attrs:{size:"mini"},on:{click:function(a){return e.addEntrust(t.row,t.$index)}}},[e._v("编辑")]),e._v(" "),a("button",{class:0==t.row.status?"W_warning":"W_success",on:{click:function(a){return e.changeStatus(t.row,t.$index)}}},[e._v(e._s(0==t.row.status?"停用":"启用"))]),e._v(" "),a("el-button",{staticClass:"delCol",attrs:{size:"mini"},on:{click:function(a){return e.del(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),e.total>20?a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.total,"page-size":20,"current-page":e.p},on:{"current-change":e.changePage}}):e._e()],1),e._v(" "),a("el-dialog",{staticClass:"entruststyle",attrs:{title:"委托设置",visible:e.centerDialogVisible,width:"500px","lock-scroll":!1,center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"委托时间","label-width":e.formLabelWidth,id:"zq"}},[a("el-date-picker",{attrs:{width:"315px","value-format":"yyyy-MM-dd",type:"daterange",clearable:!e.centerDialogVisible,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.newTableData.date,callback:function(t){e.$set(e.newTableData,"date",t)},expression:"newTableData.date"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"委托事项","label-width":e.formLabelWidth}},[a("el-select",{staticStyle:{width:"315px"},attrs:{placeholder:"选择服务事项",filterable:!0},model:{value:e.newTableData.apps,callback:function(t){e.$set(e.newTableData,"apps",t)},expression:"newTableData.apps"}},e._l(e.apps,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"原申请人","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"145px"},attrs:{placeholder:"姓名"},model:{value:e.newTableData.origin_user_name,callback:function(t){e.$set(e.newTableData,"origin_user_name","string"===typeof t?t.trim():t)},expression:"newTableData.origin_user_name"}}),e._v(" "),a("el-input",{staticStyle:{"margin-left":"3px",width:"163px"},attrs:{placeholder:e.$t("system.numberText")},model:{value:e.newTableData.origin_user_number,callback:function(t){e.$set(e.newTableData,"origin_user_number","string"===typeof t?t.trim():t)},expression:"newTableData.origin_user_number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"委托人员","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"145px"},attrs:{placeholder:"姓名"},model:{value:e.newTableData.user_name,callback:function(t){e.$set(e.newTableData,"user_name","string"===typeof t?t.trim():t)},expression:"newTableData.user_name"}}),e._v(" "),a("el-input",{staticStyle:{"margin-left":"3px",width:"163px"},attrs:{placeholder:e.$t("system.numberText")},model:{value:e.newTableData.user_number,callback:function(t){e.$set(e.newTableData,"user_number","string"===typeof t?t.trim():t)},expression:"newTableData.user_number"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addEntrustlist}},[e._v("确 定")])],1)],1)],1)},Ue=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("代理委托"),a("span",[e._v("提示：设置委托人甲帮原申请人乙发起申请")])])}],Pe={data:function(){return{apps:[],tableData:[],p:1,total:0,formLabelWidth:"100px",centerDialogVisible:!1,newTableData:{date:[],apps:"",origin_user_name:"",origin_user_number:"",user_name:"",user_number:""},loading:!1}},created:function(){this.getList(),this.getApps()},methods:{getList:function(){var e=this;this.appFetch({url:"getAgentList",method:"get",data:{p:this.p,agent_type:1}},(function(t){0==t.e?(t.d.data.forEach((function(e){e.service_text=e.app_name.join("、"),e.time="".concat(e.start_time.split(" ")[0]," 至 ").concat(e.end_time.split(" ")[0])})),e.tableData=t.d.data):e.$message.error(t.m)}),(function(t){e.$message.error("系统错误")}))},getApps:function(){var e=this;this.appFetch({method:"get",url:"agentApp"},(function(t){0==t.e?e.apps=t.d.map((function(e){return{name:e.name,id:e.id}})):e.$message({type:"warning",message:t.m})}),(function(t){e.$message.error("系统错误")}))},addEntrust:function(e){var t=this;e?this.appFetch({url:"agentInfo",method:"get",data:{id:e.id}},(function(e){0==e.e?(t.newTableData={id:e.d.id,date:[e.d.start_time.split(" ")[0],e.d.end_time.split(" ")[0]],apps:e.d.app_id.map((function(e){return e.id}))[0],origin_user_name:e.d.origin_user_name,origin_user_number:e.d.origin_user_number,user_name:e.d.user_name,user_number:e.d.user_number},t.centerDialogVisible=!0):t.$message.error(e.m)}),(function(e){t.$message.error("系统错误")})):this.newTableData={date:[],apps:"",origin_user_name:"",origin_user_number:"",user_name:"",user_number:""},this.centerDialogVisible=!0},addEntrustlist:function(){var e=this;this.newTableData.date.length?this.newTableData.apps?this.newTableData.origin_user_name&&this.newTableData.origin_user_number?this.newTableData.user_name&&this.newTableData.user_number?this.appFetch({url:"saveAgent",method:"post",data:{id:this.newTableData.id,agent_type:1,start_time:this.newTableData.date[0],end_time:this.newTableData.date[1],user_name:this.newTableData.user_name,user_number:this.newTableData.user_number,origin_user_name:this.newTableData.origin_user_name,origin_user_number:this.newTableData.origin_user_number,app_id:JSON.stringify([this.newTableData.apps])}},(function(t){0==t.e?(e.getList(),e.centerDialogVisible=!1):501==t.e?e.$message.error("".concat(e.newTableData.user_number," 不在系统中请修改").concat(e.$t("system.numberText"))):502==t.e?e.$message.error("".concat(e.newTableData.user_name," 和 ").concat(e.newTableData.user_number," 不匹配，请重新输入")):503==t.e?e.$message.error("".concat(e.newTableData.origin_user_number," 不在系统中请修改").concat(e.$t("system.numberText"))):504==t.e?e.$message.error("".concat(e.newTableData.origin_user_name," 和 ").concat(e.newTableData.origin_user_number," 不匹配，请重新输入")):505==t.e?e.$message.error("原申请人和委托人工号相同"):e.$message.error(t.m)}),(function(t){e.$message.error("系统错误")})):this.$message.warning("请输入委托人员信息"):this.$message.warning("请输入原申请人信息"):this.$message.warning("请选择事项"):this.$message.warning("请选择委托时间")},changeStatus:function(e){var t=this;this.appFetch({url:"changeAgentStatus",method:"post",data:{id:e.id,status:e.status?0:1}},(function(e){0==e.e?t.getList():t.$message.error(e.m)}),(function(e){t.$message.error("系统错误")}))},del:function(e){var t=this;this.$MessageBox.confirm("此操作将永久删除该委托, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",lockScroll:!1,type:"warning"}).then((function(){t.appFetch({url:"delAgent",method:"post",data:{id:e.id}},(function(e){0==e.e?t.getList():t.$message.error(e.m)}),(function(e){t.$message.error("系统错误")}))})).catch((function(){}))},changePage:function(e){this.p=e,this.getList()}}},Ve=Object(n["a"])({},Pe),Ie=Ve,Oe=Object(m["a"])(Ie,Ee,Ue,!1,null,null,null),ze=Oe.exports,Ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-bottom-right downloadCenter",staticStyle:{background:"#fff"}},[a("div",{staticClass:"main-top-title"},[a("p",[e._v("下载中心")]),e._v(" "),a("div",{staticClass:"search"},[a("span",[e._v("下载内容")]),e._v(" "),a("el-input",{staticStyle:{width:"170px"},attrs:{placeholder:"输入关键词",size:"small"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch(t)}},model:{value:e.keyword,callback:function(t){e.keyword="string"===typeof t?t.trim():t},expression:"keyword"}}),e._v(" "),a("span",[e._v("类型")]),e._v(" "),a("el-select",{staticStyle:{width:"110px"},attrs:{placeholder:"选择类型",size:"small"},on:{change:e.handleSearch},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.apps,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSearch}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.reset}},[e._v("重置")])],1)]),e._v(" "),a("div",{attrs:{id:"downLoad"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"下载内容",prop:"name",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"类型",prop:"type_name",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作时间",prop:"create_time",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"结果",prop:"result",width:"220"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("el-button",{staticClass:"exporting",attrs:{size:"mini"}},[e._v(" 导出中 ")]):e._e(),e._v(" "),1==t.row.status?a("el-button",{staticClass:"download",attrs:{size:"small"},on:{click:function(a){return e.download(t.row.id)}}},[e._v("下载")]):e._e(),e._v(" "),2==t.row.status?a("el-button",{staticClass:"export",attrs:{size:"mini"},on:{click:function(a){return e.downloadRest(t.row.id)}}},[e._v("重新导出")]):e._e()]}}])})],1),e._v(" "),e.total>10?a("el-pagination",{attrs:{background:"",layout:"total,  prev, pager, next, jumper",total:e.total,"page-size":e.pageSize,"current-page":e.p},on:{"current-change":e.handleCurrentChange}}):e._e()],1)])},Me=[],Be={data:function(){return{model:"",apps:[{value:0,label:"全部"},{value:1,label:"导出归档表格"},{value:2,label:"导出归档附件"},{value:3,label:"导出报表"}],keyword:"",type:0,total:0,pageSize:20,p:1,tableData:[],status1:0,intervalId:null}},mounted:function(){this.getLists()},watch:{status1:function(){var e=this;clearInterval(this.intervalId),this.intervalId=setInterval((function(){1==e.status1?e.getLists():clearInterval(e.intervalId)}),3e3)}},methods:{getLists:function(){var e=this;this.appFetch({url:"dowmloadCenter",method:"POST",data:{keyword:this.keyword,type:this.type,p:this.p,pageSize:this.pageSize}},(function(t){0==t.e?(e.tableData=t.d.data,e.tableData.filter((function(t){0==t.status&&(e.status1=1)})),e.total=t.d.total):e.$message.error(t.m)}),(function(t){e.$message.error({message:t})}))},handleSearch:function(){this.getLists()},reset:function(){this.keyword="",this.type=0,this.getLists()},download:function(e){window.open("".concat(appConfig.apiBaseUrl,"/site/download-centre/download?id=").concat(e))},downloadRest:function(e){var t=this;this.appFetch({url:"downloadRest",method:"POST",data:{id:e}},(function(e){0==e.e?(t.$message.success(e.m),t.getLists()):t.$message.error(e.m)}),(function(e){t.$message.error({message:e})}))},handleCurrentChange:function(e){this.p=e,this.getLists()},clearTimeoutF:function(){this.intervalId&&clearTimeout(this.intervalId)}},beforeDestroy:function(){this.clearTimeoutF()}},Ge=Object(n["a"])({name:"downloadCenter"},Be),Re=Ge,We=Object(m["a"])(Re,Ne,Me,!1,null,null,null),Je=We.exports,He=a("8e6a"),Qe=a("6f29"),Ye={data:function(){return{showroute:"infoCenter",simpleinfo:!1,arr:["infoCenter"],hasAgent:!1}},mixins:[He["a"],Qe["a"]],created:function(){var e=this;this.appFetch({method:"get",url:"getUserName"},(function(t){0==t.e&&(e.simpleinfo=t.d)})),this.$route.query.showroute&&(this.showroute=this.$route.query.showroute,this.arr=[this.$route.query.showroute]),this.getHasAgent()},methods:{changeroute:function(e){this.arr.includes(e)||this.arr.push(e),this.showroute=e},setstyle:function(){this.$nextTick((function(){$(".main-bottom").css({minHeight:window.screen.height-449+"px"})}))},getHasAgent:function(){var e=this;this.appFetch({url:"hasAgent",method:"get"},(function(t){0==t.e&&(e.hasAgent=!t.d.can)}))}},mounted:function(){$("#infoCenterLoading").css("min-height",document.body.clientHeight-135+"px")},watch:{simpleinfo:function(){this.setstyle()}}},Ze=(a("e76e"),Object(n["a"])({name:"ucentercommon",components:{frontHeader:r["r"],frontFooter:r["q"],breadcrumb:r["i"],toTop:r["I"],infoCenter:A,sealInfo:ie,autograph:de,committalCharge:we,scientificUser:Se,weituoshenqing:je,dailiweituo:ze,downloadCenter:Je}},Ye)),qe=Ze,Xe=Object(m["a"])(qe,s,i,!1,null,null,null);t["default"]=Xe.exports}}]);